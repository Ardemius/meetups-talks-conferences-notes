= Soir√©e Java EE 8? Ah ben non peut-√™tre! - 2017/10/10
Thomas SCHWENDER <https://github.com/ardemius[@ardemius]>
// Handling GitHub admonition blocks icons
ifndef::env-github[:icons: font]
ifdef::env-github[]
:status:
:outfilesuffix: .adoc
:caution-caption: :fire:
:important-caption: :exclamation:
:note-caption: :paperclip:
:tip-caption: :bulb:
:warning-caption: :warning:
endif::[]
:imagesdir: images
:source-highlighter: highlightjs
// Next 2 ones are to handle line breaks in some particular elements (list, footnotes, etc.)
:lb: pass:[<br> +]
:sb: pass:[<br>]
// check https://github.com/Ardemius/personal-wiki/wiki/AsciiDoctor-tips for tips on table of content in GitHub
:toc: macro
//:toclevels: 3
// To turn off figure caption labels and numbers
:figure-caption!:

toc::[]

== Overview

https://www.parisjug.org/xwiki/wiki/oldversion/view/Meeting/20180612[Descriptif de la soir√©e sur le site du ParisJUG.]

image::20180612_parisjug_maven5-java9_01.jpg[]

Etaient pr√©sents pour Softeam :

* *Guillaume LEMONT*
* *Thomas SCHWENDER*
* *Clarence CHARLES*

== Maven et Java 9

Pr√©sent√© par https://www.parisjug.org/xwiki/wiki/oldversion/view/Speaker/HerveBoutemy[*Herv√© Boutemy*] (https://twitter.com/hboutemy[@hboutemy])

=== Abstract 

====
Maintenant que Java 9 est sorti, on va pouvoir ajouter des descripteurs de modules dans tous nos projets, n'est-ce pas? +
Pas si s√ªr... 

Les modules Java 9 sont tr√®s puissants, mais sans ma√Ætrise, ils risquent de tout casser non seulement au niveau de vos programmes Java mais aussi au niveau de l'√©cosyst√®me Maven. +
Avez vous d√©j√† r√©fl√©chi au nom de module de votre jar ? Un conseil d'ami : ne vous contentez pas du nom par d√©faut. +
Cette session vous donnera de nombreux conseils pratiques qui ne sont pas directement dans la sp√©cification, mais qui doivent absolument √™tre gard√©s en t√™te au fil de l'adoption g√©n√©rale du syst√®me de modules Java.
====

=== Notes

* Maven 3 *marche avec Java 9* +
-> ce qui peut planter, ce sont les *plugins*. Ce sont eux qu'il faut absolument *mettre √† jour*.

* Pour g√©rer les modules avec Maven 3
	** ajouter un module-info.java dans src/main/java
	** maven-compiler-plugin en version 3.7.0 au minimum

* Points de collision de juin √† septembre 2017 autour de Jigsaw pour Java 9 (JSR 376)
	** *le nom des modules* -> point similaire √† "comment choisir mes groupId et artifactId ?" dans Maven +
	-> les noms de modules doivent √™tre aussi uniques ques les noms de d√©pendances. +
	On a constat√© des pbs avec les *noms de modules avec des nombres*, et les *noms de modules automatiques*

*Noms de modules avec des nombres*, Oracle ne voulait plus des nombres comme derniers caract√®res. +
Mais alors, que fait-on avec *"DB2"* par exemple ? +
-> Oracle est finalement revenu sur cette proposition.

*Nom de modules automatiques*. +
Constation maven au sujet des [red]*collisions* : de nombreux artifactId ont le m√™me groupId. +
Si on base le nom de modules *uniquement sur le nom de fichier*, qui correspond √† l'artifactId, les collisions vont pleuvoir... +
Les fournisseurs de librairies ne doivent *JAMAIS* livrer des librairies dont le nom vient d'un *auto-module* (qui serait par exemple `library-a.jar` et non `library-a-1.0.jar`) +
-> Un jar qui n'a *pas d'export* = c'est une *application* +
-> Un jar avec des *exports* = c'est une *librairie*

NOTE: A partir de Maven 3.5.0, on a la coloration syntaxique !

image::20180612_parisjug_maven5-java9_02.jpg[]

* Pour √©viter tout probl√®me de collision d√©coulant des noms des auto-modules, il *FAUT* d√©finir ses propres `Automatic-Module-Name`

Quelques rappels :

* plus de "split" packages
* √† la racine, pas de classes sans package

.Astuces pour utiliser Java 9 avec Maven
image::20180612_parisjug_maven5-java9_03.jpg[]

En cas de probl√®mes :

* Stackoverflow est votre ami
* le wiki Confluence de Maven
* et si toujours pas de solution, ouvrez un ticket

=== Q&A

* Tous les projets peuvent-ils devenir modulaires ? -> *NON* +
Plus le projet est vieux, plus c'est compliqu√©

* *Le classpath ne va pas dispara√Ætre* (y compris √† l'avenir) +
Le *module-path* compl√©mente le classpath, mais ne le remplace pas.

* Maven va-t-il g√©n√©rer mon descripteur de module ? -> *NON* 
	** le POM sert √† t√©l√©charger les librairies
	** le descripteur de module sert √† g√©rer de fa√ßon fine les visibilit√©s de module √† module. +
	-> Ce n'est *PAS* le m√™me usage

* On utilise le goal `depdendency:analyse` pour v√©rifier si les d√©pendances d√©clar√©es sont bien utilis√©es.
	** *JDEPS* peut cr√©er un descripteur de d√©ploiement "grossier" (mais est surtout pr√©vu pour permettre de cr√©er le descripteur de d√©ploiement final) 

== Maven 3 & 5

Pr√©sent√© par https://www.parisjug.org/xwiki/wiki/oldversion/view/Speaker/HerveBoutemy[*Herv√© Boutemy*]

=== Abstract 

====
Ca fait bien longtemps que Maven 3 est sorti. Depuis, il n'y a que des releases mineures : plus rien de bouge ? C'est mort ? M√™me pour Java 9, il n'y a pas eu besoin de release Maven ! +
Je vous rassure, Maven continue d'√©voluer : simplement, il le fait sans bruit inutile et en vous garantissant une √©volution √† votre rythme.

Pourtant, une √©volution majeure va √™tre n√©cessaire, qui m√©ritera une nouvelle version : Maven 5.  +
Pourquoi pas 4 ? Quelle est cette √©volution ? Et comment l'√©quipe Maven va t'elle faire pour conserver la stabilit√© √† laquelle on √©tait habitu√©s, malgr√© ce grand changement ?
====

=== Notes

.Disclaimer
IMPORTANT: Tout ce qui suit n'est qu'une opinion personnelle d'Herv√©, et en aucun cas un engagement de Maven !

* Autre rappel : tous les contributeurs sont les bienvenus. +
Ne pas h√©siter √† cr√©er des Jira, ou des PR

[NOTE]
====
Herv√© est pr√©sent tous les derniers mardi du mois au https://www.meetup.com/fr-FR/Paris-Hackergarten/[Paris Hackergarten] (https://twitter.com/hckrgartenparis[@HckrgartenParis])

Il s'agit d'un MeetUp dont le but est de promouvoir 
Ce MeetUp est le rendez-vous de ceux qui veulent se lancer dans la contribution aux projets OpenSource, en √©tant encadr√©s par leurs principaux committeurs. +
"_Adopt an OpenSource project_" est la devise du MeetUp üòâ.

Herv√© a besoin de vous sur Maven, venez !
====


* *Migration de Subversion √† Git* pour Maven
	** Jeter un oeil √† *Apache GitBox* = un multi-master de GitHub
	** plus de 100 repo Git suite √† la migration +
	-> Utilisation de *Google Repo* pour r√©cup√©rer facilement tous ces derniers...

.Astuce : on peut maintenant facilement mettre √† jour la doc Maven
image::20180612_parisjug_maven5-java9_04.jpg[]

.Carte du code Maven
image::20180612_parisjug_maven5-java9_05.jpg[]

* *Classworlds* : tout le syst√®me de classloader au coeur de Maven (permet d'√©viter les probl√®mes de classloader parmi tous les plugins Maven)

.structuration Maven 3.0
image::20180612_parisjug_maven5-java9_06.jpg[]

.structuration Maven 3.5
image::20180612_parisjug_maven5-java9_07.jpg[]

* librairie *compat* depuis Maven 3.0 (n√©cessaire pour clarifier la structure de Maven 2) : tous les scories de la migration y sont. +
-> *Plein de split packages*, la preuve que Maven ne passera *PAS* √† Java 9...

.Pourquoi Maven 5 et non 4 ?
[NOTE]
====
Si on a un *Maven 5* et non un Maven 4, c'est parce que le POM √©tait auparavant en version 4, et que pour le faire √©voluer, on a cr√©√© une v5.

-> Gros probl√®me, du fait du format XML et du site Maven Central, on ne peut *PAS* utiliser autre chose qu'un POM v4 pour Maven Central. +
Donc, *notre POM v5 va √™tre consomm√© au build afin de cr√©er un POM v4*, qui pourra lui √™tre int√©gr√© dans Maven Central... 
====

== En conclusion

.Wanted ! Maven contributors !
[IMPORTANT]
====
Nouveau rappel d'Herv√© : il a besoin de vos retours utilisateur sur Maven, et de votre aide. +
Venez donc le retrouver au https://www.meetup.com/fr-FR/Paris-Hackergarten/[Paris Hackergarten] !
====

