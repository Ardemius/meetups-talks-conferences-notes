= Devoxx France 2021
Thomas SCHWENDER <https://github.com/ardemius[@ardemius]>
// Handling GitHub admonition blocks icons
ifndef::env-github[:icons: font]
ifdef::env-github[]
:status:
:outfilesuffix: .adoc
:caution-caption: :fire:
:important-caption: :exclamation:
:note-caption: :paperclip:
:tip-caption: :bulb:
:warning-caption: :warning:
endif::[]
:imagesdir: ./images
:source-highlighter: highlightjs
// Next 2 ones are to handle line breaks in some particular elements (list, footnotes, etc.)
:lb: pass:[<br> +]
:sb: pass:[<br>]
// check https://github.com/Ardemius/personal-wiki/wiki/AsciiDoctor-tips for tips on table of content in GitHub
:toc: macro
:toclevels: 1
// To number the sections of the table of contents
:sectnums:
// To turn off figure caption labels and numbers
:figure-caption!:
// Same for examples
//:example-caption!:
// To turn off ALL captions
// :caption:

toc::[]

== Keynote du mercredi

* Et c'est parti pour Devoxx France 2021 √©dition "9 3/4" üòâ !

image:devoxx-france-2021_01.jpg[]
image:devoxx-france-2021_02.jpg[]

== Projet MakAir, comment et pourquoi construire un respirateur open source ?

=== Abstract

.Speaker : Quentin Adams
----
Quentin ADAM is the CEO of Clever Cloud : a Platform as a Service company allowing you to run java, scala, ruby, node.js, php, python or go applications, with auto scaling and auto healing features. This position allow him to study lots of applications, code, practice, and extract some talks and advises. Regular speaker at various tech conference, he‚Äôs focused to help developers to deliver quickly and happily good applications.
----

----
Les crises agissent comme des catalyseurs, et la crise du COVID19 n'a pas √©chapp√©e √† la r√®gle sur les technologies de la sant√©. Au d√©but de la pand√©mie, avec quelques amis nous avons lanc√© le projet MakAir, un respirateur artificiel open source pour r√©pondre √† l'urgence. C'est d√©sormais devenu un projet de 300 contributeurs financ√© par l'Arm√©e et le CEA, une folle course d'intense travail scientifique pour livrer un dispositif m√©dical industriel et open source. Au final, sur la centaine de projet mondiaux, il est le seul qui a √©t√© utilis√© sur des patients. Dans cette keynote, apr√®s une pr√©sentation rapide du projet, on √©voquera sa construction pass√©e mais surtout future. Nous r√©pondrons aussi √† ces questions : Qu‚Äôest-ce que des ing√©nieurs en informatique ont apport√© √† cet √©cosyst√®me ? Pourquoi est-ce que le projet est n√© dans l‚Äôinformatique, qu‚Äôest-ce qui a fait la sp√©cificit√© de notre √©cosyst√®me et comment il peux aider les autres √©cosyst√®mes ? Pourquoi l'open source m√©dical est un sujet pertinent et majeur ? Comment peut on le d√©ployer ? Est ce que tout le monde peut aider ?
----

=== Notes

* Quentin a commenc√© par rassembler 3 copains : 2 "√©lectroniciens" et le directeur de la Data de l'h√¥pital de Nantes
* Au bout de 3 jours, 1er montage √©lectronique sur base de... capote... (apparemment ce qui ressemble le plus √† un poumon)

image::devoxx-france-2021_03.jpg[]

* 300 contributeurs au final, 30 contributeurs √† plein temps
* le seul respirateur au monde qui ait fini branch√© sur un humain, tout en respectant les certifications en vigueur

*POURQUOI CA A MARCHE ?*

    * *bienveillance* bienveillance bienveillance ("a-x√©nophobie") : on √©coute et respecte ce que chacun dit, m√™me si on ne partage pas le m√™me langage, le m√™me vocabulaire
    * Philosophie de l'*it√©ration rapide* tr√®s r√©pandue dans l'IT : usage massif d'impression 3D, etc.
    * acceptation de l'ignorance : "on sait pas, pas grave, on va chercher l'info..."

{lb}

* Le MakAir aura co√ªt√© 4x moins cher qu'un autre respirateur d'un grand industriel
* Faire de l'√©lectronique n'a jamais co√ªt√© aussi peu cher
* idem pour la bio-√©lectronique, les co√ªts chutent drastiquement
    ** ce qui rend possible de faire de la bio-√©lectronique en hobby dans son garage
* Aujourd'hui un respirateur co√ªte ~40 K‚Ç¨, et un MakAir ~4K‚Ç¨

NOTE: Au final, l'Arduino a √©t√© remplac√© par le STM32 (Quentin en parle souvent en podcast) 

* Actuellement, on r√©cup√®re tr√®s peu de data des outils m√©dicaux autour du lit du patient. 
    ** Et c'est bien dommage, car, finalement, il serait assez facile de faire un "Dis Siri, il a quoi ce patient ?"

.Volontariat pour aider MakAir
image::devoxx-france-2021_04.jpg[]

Conclusion : MakAir c'est l'illustration qu'on a tout int√©r√™t √† pousser le mod√®le OpenSource ailleurs que simplement dans l'IT !

Aller voir le stand MakAir !

image:MakAir_01.jpg[]

== G√©rer syst√©matiquement les erreurs dans votre code pour le(s) rendre utile(s)

=== Abstract

.Speaker : Fran√ßois Armand
----
Fran√ßois Armand, papa x3, d√©veloppeur passionn√©, est persuad√© que les logiciels libres et les d√©veloppement soutenable sont notre avenir, Scala depuis 2006, fan de FP (je suis tomb√© dans OCaml et COQ lorsque j‚Äô√©tais petit) et de ZIO, co-fondateur & CTO de Rudder, continuous audit & configuration.
----

----
¬´Notre m√©tier de d√©veloppeur consiste essentiellement √† d√©couvrir et g√©rer les cas non nominaux d‚Äôune application¬ª.

Sous l‚Äôapparente simplicit√© de cette v√©rit√© g√©n√©rale se cache une r√©alit√© complexe qui emb√™te les d√©veloppeurs du monde entier au quotidien. Vous aussi, vous vous √™tes demand√© : ‚Äúmais ce comportement, c‚Äôest une erreur que je dois mod√©liser, ou c‚Äôest une exception ?‚Äù

Cette pr√©sentation cherche √† analyser ce que sont les erreurs dans une application et leur r√¥le fondamental dans la transmission d‚Äôinformations pour ceux qui les re√ßoivent: les utilisateurs finaux, les d√©veloppeurs via d‚Äôautres programmes ou d‚Äôautres composantes de l‚Äôapplication, ou encore les administrateurs syst√®me. Elle propose une m√©thode qui permet de rechercher et g√©rer syst√©matiquement les cas non nominaux des applications et qui s‚Äôadapte aussi bien au microservice vite fait qu‚Äô√† l‚Äôapplication de gestion vieille de 10 ans. Enfin, elle montre comment un nouveau framework de programmation fonctionnelle √©crit en Scala, ZIO, accompagne parfaitement la m√©thode d√©crite et comment il a √©t√© utilis√© dans Rudder, un logiciel libre de configuration et d‚Äôaudit de serveurs en continu.
----

=== Notes

* Qu'est-ce qu'un d√©veloppeur ?
    ** *Model the world into code* (and try to make it useful !)

Gestion des erreurs dans les programmes : 

    * *Inventaire des erreurs* : avoir un contrat clair sur ce que fait notre code +
    Les choses ont tout int√©r√™t √† √™tre *na√Øvement* explicitent (et donc, verbeuses) +
    -> J'AIME ce constat ! üôÇ
    {lb}
    Prenons l'exemple de `getUserFromDB(id: UserID): User` +
    C'est plein de "mensonges" +
    image:devoxx-france-2021_05.jpg[]

    * *Model everything*

.1er Take away
image:devoxx-france-2021_06.jpg[]

    * ne pas mentir dans son code
    * mod√©liser son code via un syst√®me de types

*2e Take away* : gros progr√®s ces derni√®res ann√©es des compilateurs qui sont devenus capables de g√©rer la plupart des erreurs

image::devoxx-france-2021_07.jpg[]

.Make promises, keep them
image:devoxx-france-2021_08.jpg[]

* plus les promesses sont importantes, plus on doit √™tre stricte sur les contrats et API

.3e Take away
image:devoxx-france-2021_09.jpg[]

* *4e Take away* : rendre les signaux les plus clairs possibles
    ** ce n'est pas un souci de ne pas savoir (on peut ne pas savoir traiter un cas), mais il faut juste l'indiquer

.Conclusion
image:devoxx-france-2021_10.jpg[]

.Ressources
image:devoxx-france-2021_11.jpg[]

.Synth√®se
image:devoxx-france-2021_12.jpg[]

NOTE: Une conf√©rence tr√®s int√©ressante sur une bonne gestion, se voulant *exhaustive* (c'est le mot cl√©), des erreurs, MAIS, qui n√©cessite absolument une relecture pour rentrer dans le d√©tail en prenant son temps.

* Cette fa√ßon de faire va potentiellement rendre le code plus verbeux (tr√®s)
    ** Et avec Java qui est historiquement verbeux (malgr√© les am√©liorations de ces derni√®res ann√©es), c'est un point √† surveiller pour ne pas rendre le code trop lourd, et perdre en visibilit√©

== AWS vs GCP vs Azure

Universit√©. +
Speakers : Laurent Grangeau, Tony Jarriault, Olivier Dupr√©

=== Abstract

----
Tout le monde conna√Æt ces 3 clouders publics majeurs. Mais... qu'ont-ils r√©ellement en commun ? Quelles sont leurs diff√©rences profondes ? Le choix pour l'un des 3 est-il une question de coeur, de comp√©tences disponibles ou capacit√©s techniques ?

Faire le tour complet de chacune de ces plateformes prend d√©j√† plus d'une journ√©e. Alors faire le tour des 3 de mani√®re exhaustive lors d'un talk est utopique. Nous irons donc droit au but et nous focaliserons sur les services majeurs, les plus utilis√©s et ceux pour lesquels la comparaison est la plus int√©ressante.
----

=== Notes

* Actuellement, Google n'est pas encore pr√©sent sur le territoire fran√ßais
    ** bien le garder en t√™te en termes de latence

* C√¥t√© *compute IaaS*
    ** les 3 plateformes se valent pour les CPUs et les GPUs, les diff√©rences apparaissent quand on commence √† parler de FPGAs et d'ASICs
    ** Le TPU de Google est un ASICs d√©di√© au Tensorflow. Google est le plus avanc√© √† ce niveau
    ** C√¥t√© Azure, Corsica est le seul ASIC disponible, d√©di√© √† la compression et √† la xxx

* C√¥t√© *network IaaS* +
image:devoxx-france-2021_13.jpg[]
    ** Avantage c√¥t√© Azure pour la communication
    ** Azure est le seul √† proposer la communication VPC √† VPC √† plat (chercher cette notion de "daisy VPC")
        *** c'est un point capital pour le design d'une landing zone

* C√¥t√© *IaaS QoS et availability*
    ** les 3 clouds se valent √† peu pr√®s, avec un petit avantage pour GCP, dont le SLA est √† 99,99% pour les VM, contre 99,9% pour Azure et 99,5% pour Amazon
        *** jusqu'√† tr√®s r√©cemment AWS n'avait pas de SLA sur les VMs, mais seulement sur les AZ (Availability Zones)
        *** Azure et AWS cherche √† combler cette diff√©rence via divers options de r√©silience
    ** l'Availability Set est le gros plus d'Azure : c'est natif sur Azure, c'est √† vous de le mettre en place avec AWS et GCP

* Mettre en place des *RTO* et *RPO* "parfaits", √† 0, est EXTREMEMENT co√ªteux
    ** RPO : Recovery Point Objective
    ** RTO : Recovery Time Objective
    ** Si mon data center br√ªle que se passe-t-il ? Et m√™me si j'ai fait des backups sur bande, √† quelle fr√©quence fais-je ces backups ? On ne peut jamais TOUT garantir √† 100%

* *IaC* : Infrastructure as Code
    ** l'approche principale quand on fait du Cloud
    ** *Azure Resource Manager* : les speakers ne sont PAS FANS DU TOUT ! (du JSON au kilom√®tre)
        *** la nouvelle syntaxe *Bicep*, b√¢tie sur Azure ARM, est apparemment bien plus propre
            **** Bicep serait une esp√®ce de "ARM 2.0"
            **** et ressemblerait beaucoup plus √† du TerraForm
    ** m√™me probl√®me avec AWS, mieux vaut maintenant utiliser *CDK* (Cloud Development Kit)
        *** CDK est plus puissant que l'ancien CloudFormation. Check pr√©sents √† la compilation contre seulement au runtime pour Cloudformation.

    ** Mais √©videmment Bicep et CDK ne sont pas compatibles, idem avec l'√©quivalent chez Google. DONC, c√¥t√© *Hashicorp*, on va cr√©er un langage, un HCL (Hashicorp Configuration Language), *Terraform*, agnostique du Cloud provider.
        *** mais le *code n'est PAS r√©utilisable* d'un Cloud provider √† l'autre.
        *** l'int√©r√™t est si l'on veut √™tre *multi-cloud* : on a la *m√™me syntaxe* et la *m√™me logique*.

    ** *Pulumi* : une tentative de cr√©er un framework d'IaC r√©ellement agnostique, mais cela n'a pas fonctionn√©, les Cloud providers √©tant trop diff√©rents.

.Rapidit√© d'instanciation d'un VM
[NOTE]
====
* AWS est le plus rapide, avec 20 √† 30 sec pour d√©marrer une VM
* C'est plus "al√©atoire" sur Azure (parfois rapide, parfois long, on ne sait pas r√©ellement pourquoi...)
====

* Actuellement, la tendance chez les clients n'est plus √† faire du "Lift & Shift" (je prends mon on-premise et je le d√©pose en l'√©tat dans le Cloud), mais √† chercher davantage de valeur ajout√©e
    ** Le "Lift & Shift" est tr√®s co√ªteux
    ** c√¥t√© "davantage de valeur ajout√©e", il est ici question de *containers* ou de *managed service*

==== CaaS : Container as a Service

* C√¥t√© *CaaS* : Container as a Service
    ** *AWS* : micro-VM qui d√©marre en moins d'1 sec
        *** multi-tenant
        *** assez √©loign√© de Kubernetes (scaling automatique difficile)
        *** taille du pool limit√© √† 100 noeuds
        *** via AKS, on peut automatiser le shuting-down
            **** Les 2 autres n'ont pas cette fonctionnalit√© qui permet de faire baisser la facture (comme on est la plupart du temps sur du "pay as you go")
        *** Point noir : difficile de faire grossir les pools via un scaling automatique
            **** √ßa se fait, mais dans la douleur (l√† o√π c'est tr√®s simple via Azure)
    ** *Azure* : 
        *** toute l'int√©gration avec des outils tiers est tr√®s bien faite
        *** taille du pool limit√© √©galement
        *** Gros avantage d'Azure : *Azure Active Directory*
            **** Cette techno, centrale, n'est pas pr√©sente dans les 2 autres stacks Cloud
            **** Azure est le seul √† la proposer nativement
    ** *GCP* :
        *** d√©j√† avec Borg pour les besoins internes, ensuite avec Kubernetes
        *** jusqu'√† 15 000 nodes par pool, le plus avanc√© des Cloud providers √† ce niveau (mais en a-t-on r√©ellement besoin ?) 
        *** la meilleure int√©gration native avec Kubernetes

    ** *Service Mesh* 
        *** pour g√©rer tout ce *qui* est comm inter-noeuds
        *** Enorme avantageuse c√¥t√© Google : il s ont 
        *** Azure est un peu en retard sur les Data Mesh

.YAML que pour les petites fichiers
[TIP]
====
YAML pour des fichiers "longs" ce n'est gu√®re pratique, car perd √©norm√©ment en lisibilit√©. +
D'o√π l'int√©r√™t d'un CDK, qui propose des structures conditionnelles et une meilleure lisibilit√©
====

* Autre info : l'auto-scaling doit se pr√©voir un minimum √† l'avance. +
Cas pratique : ouverture des r√©servations pour le concert de Justin Biber un jeudi matin
    ** gros pic de charge le jeudi matin
    ** l'auto-scaling PREND du temps, trop de temps, si ce n'est pas pr√©vu √† l'avance
        *** le temps de s'enregistrer dans Ansible, Puppet ou autre, et de d√©ployer les composants, on va mettre plusieurs dizaines de minutes, ce qui est trop
        *** pour gagner du temps, on peut *templatiser des images* (via https://www.packer.io/docs/templates/legacy_json_templates/engine[Packer] par exemple). +
        En gros, *avoir d√©j√† pr√©par√© ce dont on va avoir besoin, et non commencer √† l'installer au moment o√π on se rend compte qu'on en a besoin*.

* *Chaos engineering* disponible par d√©faut chez Amazon
    ** Chaos monkey : disparition de VMs
    ** Chaos gorilla : disparation d'une AZ
    ** Chaos Kong : disparition d'une r√©gion

* *eksctl* est r√©ellement l'outil √† privil√©gier pour g√©rer Kubernetes avec Amazon
    ** Amazon est tr√®s en retard sur la gestion de Kubernetes. +
    Ils ont choisi de mettre le paquet sur leur propre techno Fargate
    ** Leur support indique lui-m√™me qu'il ne faut pas se servir de leur CLI, mais passer √† eksctl (qui est meilleur, mais pas parfait).
    ** Alors qu'√† c√¥t√© de √ßa, tout est tr√®s simple avec GKE

* Le CaaS est clairement le *main stream* actuel
    ** avec Google, puis Azure bien devant Amazon
    ** on veut de plus en plus une infrastructure immuable

==== PaaS

* Sur un PaaS, on va consommer un service de type *middleware* ou *runtime*
* Co√ªte g√©n√©ralement plus cher que le CaaS, avec certains √©l√©ments √† prendre en compte 
    ** Un MySQL manag√© va co√ªter plus cher qu'une VM sur laquelle on installe soi-m√™me son MySQL qui est gratuit
    ** Ce qui n'est pas dit avec un SQL Server, du fait du co√ªt de licence
* Le PaaS permet de lib√©rer les OPS, comme beaucoup plus de choses sont g√©r√©es par le Cloud provider (patch management, network, upgrades, etc.)

* Azure propose un AppService, avec derri√®re, en gros, une ferme de IIS.
    ** service tr√®s demand√© chez les clients
    ** la notion de Resource Group n'est valable QUE pour Azure

== Rebelles au SaaS - Le "on-premises" est encore l√† pour longtemps

=== Abstract

.Speaker : Cl√©ment Stenac
----
Cl√©ment Stenac is a passionate software engineer, CTO and co-founder at Dataiku. He oversees the design, development of the Dataiku DSS Entreprise AI Platform. Cl√©ment was previously head of product development at Exalead, leading the design and implementation of web-scale search engine software. He also has extended experience with open source software, as a former developer of the VideoLAN (VLC) and Debian projects.
----

----
"Comment √ßa, vous n'√™tes pas SaaS ? Je ne comprends pas"

Il n'est pas exag√©r√© de dire que le monde est pass√© au SaaS, ou, du moins, celui des startups logicielles. Il semble presque incongru de nos jours de lancer une startup avec un mod√®le "on-premises" legacy, que ce soit en termes techniques ou commerciaux.

Cependant, m√™me si le changement est en train de se produire, la r√©alit√© des logiciels d'entreprise est que le "on-premises" est toujours vivant et est l√† pour rester. Les raisons techniques, s√©curitaires et politiques font du logiciel SaaS un choix difficile pour de nombreuses grandes entreprises, ce qui offre des opportunit√©s pour les startups qui supportent encore ce mod√®le. Bien s√ªr, il y a des raisons pour cette volont√© de faire du SaaS, ce qui se traduit naturellement par des contraintes pour ceux qui ne font pas ce choix, comme l'a fait Dataiku.

Dans cet expos√©, nous discuterons des raisons pour lesquelles les √©diteurs de logiciels d'entreprise peuvent choisir de supporter les d√©ploiements "on-premises", les diff√©rentes variantes de ces d√©ploiements, les d√©fis suppl√©mentaires qu'ils cr√©ent et comment nous avons trouv√© des solutions √† la plupart de ces d√©fis.
----

=== Notes

XXX

== Bash, couteau suisse du d√©veloppeur

=== Abstract

Speaker : Laurent Callarec

----
Si vous demandez √† un d√©veloppeur quels langages sont utilis√©s dans son projet, Bash ne ressortira pas forc√©ment. Et pourtant, s‚Äôil y a du Linux, il y a de grande chance qu‚Äôil y ait du Bash. Et s‚Äôil n‚Äôy en a pas encore, il pourrait √™tre avantageux d‚Äôen ajouter. Lors de cette session, je vous propose de d√©mystifier Bash - ainsi que certaines commandes GNU fort utiles - pour en faire un v√©ritable alli√© dans votre quotidien. Au travers des exemples de code et de live coding, je vous montrerai comment il peut vous aider, √† moindre co√ªt, √† industrialiser vos process. Pr√©parer une machine de d√©veloppement, construire vos pipelines de build, g√©rer vos d√©ploiements, assurer le monitoring de vos services ? Bash peut satisfaire nombreux besoins d‚Äôautomatisation. Cerise sur le g√¢teau, √† l‚Äôaide d‚Äôune approche TDD avec bats et de l‚Äòanalyseur de code statique shellcheck, je vous montrerai - tout au long de cette pr√©sentation - comment √©crire du ‚Äúvrai‚Äù code afin de briser l‚Äôid√©e re√ßue que coder en Bash, ce n‚Äôest que du bricolage.
----

=== Notes

XXX




